<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Index - Terminally Online Mod</title>
	<script src="js/theming.js"></script>
	<script src="js/output.js"></script>
	<script src="js/input.js"></script>
	<script src="js/objectUtilities.js"></script>
	<script src="js/multipleReader.js"></script>
	<link rel="stylesheet" href="style.css">
	<script>
		function dropdown(div){
			let classes = div.classList;
			
			for (let i = 0; i < classes.length; i++) {
				if (classes[i] == "closed"){
					div.classList.remove("closed");
					return;
				}
			}
			div.classList.add("closed");
		}
		function modifyName(){
			let name = document.getElementById("name");
			let id = document.getElementById("id");
			let mrSearch = document.getElementById("mrSearch");
			let cfSearch = document.getElementById("cfSearch");

			mimicTextInput(name, id, 3, 1, true);
			mrSearch.setAttribute("href", `https://modrinth.com/mods?q=${name.value}`);
			cfSearch.setAttribute("href", `https://curseforge.com/minecraft/mc-mods/search?search=${name.value}`);
		}
		function Initialise(){
			RestoreTheme();
			showMods();
		}
		function getMods(){
			readFilesFrom("data/mods.json", "data/mod/", ".json", showMods);
		}
		function showMods(data){
			let options = document.getElementsByClassName("insertMods")[0];
			options.innerHTML = "";
			
			fetch("data/mods.json")
				.then((e) => e.json())
				.then((e) => {
					e.forEach(element => {
						options.innerHTML += `<option value="${element}">${element}</option>`;
					});
				});
		}
	</script>
</head>
<body onload="Initialise()">
	<div class="content">
		<button onclick="SwitchTheme()">Switch Theme</button>
	</div>
	<form class="content">
		<h1>Add Mod</h1>
		<div class="optionGrid">
			<div class="optionBox big">
				<h3>Details</h3>
				<div class="inputEntry align">
					<label for="id">ID</label>
					<input type="text" name="id" id="id" style="font-family: Consolas, Courier, monospaced;">
				</div>
				<div class="inputEntry fill">
					<a id="mrSearch" target="_blank" href="https://modrinth.com/mods?q=test">Search in Modrinth</a><br>
					<a id="cfSearch" target="_blank" href="https://curseforge.com/minecraft/mc-mods/search?search=test">Search in CurseForge</a>
				</div>
				<div class="inputEntry align">
					<label for="name">Name</label>
					<input type="text" name="name" id="name" oninput="modifyName()">
				</div>
				<div class="inputEntry align">
					<label>Authors</label>
					<div id="authorList" class="inputList">
						<div class="inputEntry template">
							<div class="enum">1</div>
							<select name="authorRole" id="authorRole">
								<option value="owner">Owner</option>
								<option value="maintainer">Maintainer</option>
							</select>
							<input type="text" name="authorName" id="authorName">
							<button type="button" class="remove small">-</button>
						</div>
						<button type="button" class="add small" onclick="addInputListElement(authorList)">+</button>
					</div>
				</div>
				<div class="inputEntry align">
					<label for="brief">Brief</label>
					<textarea name="brief" id="brief" rows="2" class="unresizeable"></textarea>
				</div>
				<div class="inputEntry align">
					<label for="description">Description</label>
					<textarea name="description" id="description" rows="5"></textarea>
				</div>
				<div class="inputEntry align">
					<label for="license">License</label>
					<select name="license" id="license">
						<option value="None">None</option>
						<option value="LGPL3">LGPL-3.0</option>
						<option value="MIT">MIT</option>
						<option value="Apache2">Apache 2.0</option>
						<option value="CC01">CC0-1.0</option>
					</select>
				</div>
			</div>
			
			<div class="optionBox">
				<h3>Links</h3>
				<div class="inputEntry align">
					<label for="cfLink">CurseForge</label>
					<input class="autocorrect" type="text" name="cfLink" id="cfLink" placeholder="mod-name" oninput="isInDomain(cfLink, 'curseforge.com/minecraft/mc-mods/')">
				</div>
				<div class="inputEntry align">
					<label for="mrLink">Modrinth</label>
					<input class="autocorrect" type="text" name="mrLink" id="mrLink" placeholder="mod-name" oninput="isInDomain(mrLink, 'modrinth.com/mod/')">
				</div>
				<div class="inputEntry align">
					<label for="ghLink">GitHub</label>
					<input class="autocorrect" type="text" name="ghLink" id="ghLink" placeholder="mod-dev/mod-name" oninput="isInDomain(ghLink, 'github.com/')">
				</div>
				<div class="inputEntry align">
					<label for="webLink">Website</label>
					<input type="text" name="webLink" id="webLink" placeholder="https://example.com">
				</div>
				<div class="inputEntry align">
					<label for="imgLink">Image Link</label>
					<input type="text" name="imgLink" id="imgLink" placeholder="https://example.com/img.png">
				</div>
			</div>
			<div class="optionBox big">
				<h3>Clasification</h3>
				<div class="inputEntry">
					<label for="type">Type</label>
					<select name="type" id="type">
						<option value=0>Client</option>
						<option value=1>Server</option>
						<option value=2>Both</option>
						<option value=3>Either</option>
					</select>
				</div>
				<h4>Mod Loader</h4>
				<div class="inputEntry">
					<input type="checkbox" name="fabricLoader" id="fabricLoader">
					<label for="fabricLoader">Fabric</label>
				</div>
				<div class="inputEntry">
					<input type="checkbox" name="quiltLoader" id="quiltLoader">
					<label for="quiltLoader">Quilt</label>
				</div>
				<div class="inputEntry">
					<input type="checkbox" name="forgeLoader" id="forgeLoader">
					<label for="forgeLoader">Forge</label>
				</div>
				<div class="inputEntry">
					<div id="tagDropdown" class="dropdown closed">
						<button type="button" onclick="dropdown(tagDropdown)">Categories</button>
						<div class="dropdownContent">
							<div class="inputEntry">
								<input type="checkbox" name="tag-performance" id="tag-performance">
								<label for="tag-performance">Performance</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-aesthetics" id="tag-aesthetics">
								<label for="tag-aesthetics">Aesthetics</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-gamelogic" id="tag-gamelogic">
								<label for="tag-gamelogic">Game Logic</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-rendering" id="tag-rendering">
								<label for="tag-rendering">Rendering</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-gameplay" id="tag-gameplay">
								<label for="tag-gameplay">Gameplay</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-features" id="tag-features">
								<label for="tag-features">Features</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-testing" id="tag-testing">
								<label for="tag-testing">Testing</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-utility" id="tag-utility">
								<label for="tag-utility">Utility</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-audio" id="tag-audio">
								<label for="tag-audio">Audio</label>
							</div>
							<div class="inputEntry">
								<input type="checkbox" name="tag-library" id="tag-library">
								<label for="tag-library">Library</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="optionBox">
				<h3>Technical</h3>
				<div class="inputEntry">
					<input type="checkbox" name="included" id="included">
					<label for="included">Included</label>
				</div>
				<div class="inputEntry">
					<label for="version">Version</label>
					<input type="text" name="version" id="version">
				</div>
				<div class="inputEntry align">
					<label>Relations</label>
					<div id="relationList" class="inputList">
						<div class="inputEntry template">
							<div class="enum">1</div>
							<select name="relationType" id="relationType">
								<option value="depends">Depends on</option>
								<option value="benefits">Benefits from</option>
							</select>
							<select name="relationID" id="relationID" class="insertMods">
							</select>
							<button type="button" class="remove small">-</button>
						</div>
						<button type="button" class="add small" onclick="addInputListElement(relationList)">+</button>
					</div>
				</div>
			</div>
		</div>
		<button type="reset">Reset</button>
		<button type="button" onclick="recordModData()">Done</button>
	</form>
</body>
</html>